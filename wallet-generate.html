<!DOCTYPE html>
<html>
<head>
  <title>Generate Wallet</title>
  <style>
    /* CSS-Styling für das MetaMask-Interface */
    body {
      font-family: Arial, sans-serif;
      background-color: #f3f3f3;
      margin: 0;
      padding: 0;
    }

    .wallet {
      margin-top: 20px;
      text-align: center;
    }

    .wallet-address {
      font-size: 16px;
      color: #333333;
      margin-bottom: 5px;
    }

    .secret-phrase {
      font-size: 14px;
      color: #666666;
    }

    .balance {
      margin-top: 10px;
      font-size: 14px;
      color: #333333;
    }

    .button {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 200px;
      height: 50px;
      margin: 0 auto;
      margin-top: 20px;
      background-color: #8e44ad;
      color: #ffffff;
      text-decoration: none;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
    }

    .button:hover {
      background-color: #7d3c98;
    }
  </style>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
  <div class="container" style="padding-top:50px">
    <div class="row align-items-center" style="height:50px">
      <div class="col-6 d-flex align-items-center h-100">
        <img class="logo h-100 w-auto mb-0" src="./assets/logo.png" alt="RSHC Logo"/>
        <span class="pl-3" style="font-size: 25px;">RSHC Wallet</span>
      </div>
      <div class="col-3">
        <select class="form-control float-right w-50" id="colortheme">
          <option value="dark">Dark</option>
          <option value="light">Light</option>
        </select>
      </div>
      <div class="col-3">
        <div class="d-flex justify-content-end" style="height:50px; margin-right:30px">
          <div class="dropdown">
            <button class="btn btn-default dropdown-toggle lang-selected" type="button" id="menu1" data-toggle="dropdown" style="color: white; font-size:16px"><img src="https://cdn.weglot.com/flags/rectangle_mat/gb.svg" width="30" height="20" role="none" alt="English flag" class="wg-flag mr-2">English
            <span class="caret"></span></button>
            <ul class="dropdown-menu" role="menu" aria-labelledby="menu1" style="width:120px">
              <li role="presentation" class="p-3" style="font-size:14px"><a role="menuitem" tabindex="-1" href="#" class="lang-select" data-lang="en"><img src="https://cdn.weglot.com/flags/rectangle_mat/gb.svg" width="30" height="20" role="none" alt="English flag" class="wg-flag mr-2">English</a></li>                  
              <li role="presentation" class="p-3" style="font-size:14px"><a role="menuitem" tabindex="-1" href="#" class="lang-select" data-lang="de"><img src="https://cdn.weglot.com/flags/rectangle_mat/de.svg" width="30" height="20" role="none" alt="German flag" class="wg-flag mr-2">German</a></li>
              <li role="presentation" class="p-3" style="font-size:14px"><a role="menuitem" tabindex="-1" href="#" class="lang-select" data-lang="cn"><img src="https://cdn.weglot.com/flags/rectangle_mat/cn.svg" width="30" height="20" role="none" alt="Chinese flag" class="wg-flag mr-2">Chinese</a></li>
                  <!--
              <li role="presentation" class="p-3" style="font-size:14px"><a role="menuitem" tabindex="-1" href="#" class="lang-select" data-lang="es"><img src="https://cdn.weglot.com/flags/rectangle_mat/es.svg" width="30" height="20" role="none" alt="Spanish flag" class="wg-flag mr-2">Spanish</a></li>
              -->
            </ul>
          </div>
        </div>
      </div>
    </div>
    <div class="row mt-5 justify-content-center">
      <div class="col-10" style="border: 1px solid #3b4046;border-radius: 30px;">
        <div class="text-center mt-5" style="font-size: 30px;font-weight: 700;" id="wallet_generate_title">Help us improve RSHC</div>
        <div class="text-center mt-2" id="wallet_generate_subtitle">RSHC would like to gather usage data to better understand how our users interact with RSHC. This data will be used to provide the service, which includes improving the service based on your use. <br/>RSHC will...</div>
        <div class="mt-2" style="width:80%;margin:auto">
          <i class="fa fa-check" style="font-size:20px;color:green"></i>
          <span id="wallet_generate_first_rule">Always allow you to opt-out Settings</span>
        </div>
        <div class="mt-2" style="width:80%;margin:auto">
          <i class="fa fa-check" style="font-size:20px;color:green"></i>
          <span id="wallet_generate_second_rule">Send anonymized click and pageview events</span>
        </div>
        <div class="mt-2" style="width:80%;margin:auto">
          <i class="fa fa-close" style="font-size:20px;color:red"></i>
          <span id="wallet_generate_third_rule"><b>Never</b> collet information we don't information we don't need to provide the service<br/>(such as keys, addresses, transaction hashes, or balances)</span>
        </div>
        <div class="mt-2" style="width:80%;margin:auto">
          <i class="fa fa-close" style="font-size:20px;color:red"></i>
          <span id="wallet_generate_fourth_rule"><b>Never</b> collet your full IP address*</span>
        </div>
        <div class="mt-2" style="width:80%;margin:auto">
          <i class="fa fa-close" style="font-size:20px;color:red"></i>
          <span id="wallet_generate_fifth_rule"><b>Never</b> sell data. Ever!</span>
        </div>
        <div class="text-center mt-2" id="wallet_generate_final_rule">This data is aggregated and is therefore anonymous for the purposes of General Data Protection Resolution (EU) 2016/679.<br/>*When you use infura as your default RPC provider in RSHC, Infura will collect your IP address and your RSHC wallet address when you send a transaction. We don't store this information in a way that allows our systems to associate those two pieces of data. For more information on how RSHC and infura interact from a data collection perspective, see our update here, For more information on our privacy practices in general, see our Privacy Policy here.</div>
        <div class="text-center mt-4 mb-4">
          <button class="button button-primary" style="width: 300px;" onclick="generateWallet()" id="wallet_generate_button">Generate Wallet</button>
        </div>
      </div>
    </div>
  </div>
  <script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-Fy6S3B9q64WdZWQUiU+q4/2Lc9npb8tCaSX9FK7E8HnRr0Jz8D6OP9dO5Vg3Q9ct" crossorigin="anonymous"></script>
  <script src="./js/custom.js"></script>
  <script>
    var colorTheme = sessionStorage.getItem('colorTheme');
    bodyColorTheme(colorTheme);
    $("#colortheme").change(function(){
      sessionStorage.setItem('colorTheme', $("#colortheme").val());
      bodyColorTheme($("#colortheme").val());
    });
    function bodyColorTheme(color) {
      $("body").removeAttr("style");
      if (color == null || color == "dark") {
        $("body").css({backgroundColor: "#0f064c", color: "white"});
        $("#colortheme").val("dark");
      }
      else {
        $("body").css({backgroundColor: "#e9e9fc", color: "black"});
        $("#colortheme").val("light");
      }      
    }

    // JavaScript-Code zur Generierung einer zufälligen Wallet-Adresse
    function generateRandomAddress() {
      var address = '0x';
      var characters = '0123456789ABCDEFabcdef';

      for (var i = 0; i < 32; i++) {
        address += characters.charAt(Math.floor(Math.random() * characters.length));
      }

      return address;
    }

    // JavaScript-Code zum Generieren einer Wallet
    function generateWallet() {
      var address = generateRandomAddress();
      $.get("./src/wallet/generate-phrase.php",
        function(response) {
          var resp = JSON.parse(response);
          var secretPhrase = resp.phrase;
          sessionStorage.setItem('walletAddress', address);
          sessionStorage.setItem('secretPhrase', secretPhrase);
          window.location.href = "./wallet-confirmation.html";
        }
      );
    }
  </script>
</body>
</html>
